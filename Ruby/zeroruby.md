# Ruby on Railsで作られているサービス
Airbnb, GitHub, Cookpad, Gunosy, マネーフォワード

# CHAPTER1
Rubyのプログラムは.rbファイル。  
ファイル名は全て小文字を使うことが一般的

# CHAPTER2
整数同士の計算は結果が整数になる：5 / 2 = 2  
小数の計算をしたい場合は、.0をつけて小数扱いにする：5.0 / 2.0 = 2.5

### オブジェクト（もの）について
2：整数オブジェクト  
2.0：小数オブジェクト  
"2"：文字列オブジェクト  
to_iメソッド＆to_sメソッド  
オブジェクトの後ろに.をつけて書く 3.to_sや "5".to_i  
オブジェクトに対して何かするメソッドはたいてい「オブジェクト.メソッド」の形
### 式展開
#{計算式}で文字列の中に計算式を埋め込める  
#{変数}で変数も展開できる
### 変数の名前のルール
英字、数字、_を使用する。  
先頭は英字小文字または_で始める必要がある  
慣習として、英字は全て小文字、2単語以上を繋げる時は_を間に入れる（スネークケース）  
先頭を大文字にすると定数になる
### irb
1行ずつrubyのプログラムを実行するツール  
`binding.irb`とプログラムに記載することでプログラムの途中でも呼び出すことができる  
プログラムの間違いを探すときに便利

# CHAPTER3　条件分岐
比較メソッド（1 < 2等）はtrueかfalseオブジェクトを返す  
even?メソッドを偶数のときにtrueを返す（puts 2.even?のように使う）  
末尾に?がつくメソッドはtrueかfalseを返すことが多い  

### if文
**※条件式の結果がfalseかnil以外の場合は条件を満たす**
```
if 条件式
    当てはまった場合の処理
end
```

後置if  
```
当てはまった場合の処理 if 条件式  
```
当てはまった場合の処理が一行だけの場合に使用するとコードがスッキリする

### unless文
if文と反対の働き（条件を満たさないときに処理を実行）

### else
ifの条件に当てはまらない場合に処理

### elsif
ifの条件に当てはまらない場合に別の条件で比較
いくつもの条件を判断することができる

### case
複数の条件の中から当てはまったものの処理を実行  
elsifで複数繋ぐことと同じだが、プログラムの読みやすさはcaseの方が良い？  
複数の条件に当てはまった場合は一番最初に合致した処理を行う  
どの条件にも当てはまらない場合の処理はelseを使用

## 繰り返し
### 回数で指定した回数処理を繰り返す
```
回数.times do
    繰り返す処理
endo
```
doの代わりに{}で囲んでも良い
```
回数.times {
    繰り返す処理
}
```
慣習的に処理が複数行の場合はdo endを使い、一行で書く時は{}を使うことが多い

### while
条件を満たしている間ずっと繰り返す
```
while 条件式
    繰り返す処理
end
```

# CHAPTER4 配列
pメソッドとputsメソッド、両方コンソールに出力するメソッドだが、配列の出力の仕方が違うようだ。  
* p:配列をそのまま出力 => ["要素1", "要素2", ...]
* puts:配列の中身を出力（1要素ごとに改行される）

配列を代入する変数名は複数形を用いることが一般的

配列を操作するメソッド
* push：配列の最後に要素を追加
* unshift：配列の先頭に要素を追加
* pop：配列の最後の要素を削除
* shift：配列の先頭の要素を削除

配列は足し算、引き算することが可能
* 足し算：２つの配列の要素を全て含む配列ができる
* 引き算：a - bの場合aだけに含まれている要素が残った配列ができる

### each文
配列の要素の個数だけ繰り返すループ処理を行う。  
配列の要素が0個の場合でもエラーにならない（0回実行される）

### breakとnext
繰り返しの処理の途中で
* break：処理を途中で終了してループを抜ける
* next：処理を途中でを終了し、次の回の繰り返し処理へ進む

# CHAPTER5
メソッドはつなげて書くことができ、その場合は左側にあるメソッドから実行される。つなげて書く方法をメソッドチェインと呼ぶ  

### リファレンスマニュアル
メソッドの使い方等はここで調べられる。Rubyのバージョンによって使い分ける  
http://docs.ruby-lang.org/ja/

組み込みライブラリ：Ruby本体に組み込まれているので使用する際にrequireが要らない

### オブジェクトの破壊的変更
破壊的変更とは、メソッドの使用対象のオブジェクト自体を変更すること。  
例えばuniqメソッドに!がついたuniq!メソッドがある。  
uniqメソッドは対象の配列から重複した要素を取り除いた新しい配列オブジェクトを作成し返す（つまり、オブジェクトが２つになる）が、uniq!メソッドは新しい配列オブジェクトを作成せず、対象のオブジェクト自体を変更する  
**オブジェクトにはIDが割り当てられる。そのIDを確認することでそのことが確認できる**  
同名のメソッドで!がつくメソッドは対象を破壊的に変更するものが多い

### 配列関係のメソッド羅列
* size:要素数を返す
* sample:要素を1個ランダムに選んで返す
* shuffle:要素をランダムに並び替える
* sort:要素を昇順に並べる
* reverse:要素を逆順に並べる
* join:要素を連結する。()で引数を指定することで要素の間に挿入できる
* split:文字列を区切り文字（デフォルトは半角スペース）で区切って配列にする。区切り文字は引数で指定できる。
* map:配列の各要素に対して指定した処理を行うことができる
* clear:配列を空にする
* sum:配列の要素の合計を返す

# CHAPTER6 ハッシュ
ハッシュはキーと値のセットで複数のデータを扱うことができる  
キーと値にはどんな種類のオブジェクトも使用可能  
（実際キーにはシンボルを使うことが多い？ ）  

### シンボル（オブジェクト）
:で始まる文字列（英字、日本語使用可能）

### ハッシュの書き方（シンボル使用）
1. `a = {:key => value}`
2. `a = {key: value}`

２の書き方が主流となっている

### ハッシュから値を取得する
a[:key]  
存在しないキーを指定した場合はnilになる  
defaultメソッドで存在しないキーを指定した時の値を指定できる  

### ハッシュ関係のメソッド羅列
* mergeメソッド:２つのハッシュを結合
* deleteメソッド:ハッシュからキーと値を削除
* each:配列のeachメソッドと同じ動き。変数は2つ使用する
* each_key:キーだけを繰り返し処理
* each_value:値だけを繰り返し処理

# CHAPTER7 メソッド
ある一連の処理をまとめ、名前をつけたもの。  
同じ処理を繰り返し使用する場合などに作成して使用する。  

メソッドの定義方法
```
def メソッド名
    処理内容
end
```
メソッド名は英字、数字、_などが使える。  

メソッドで最後に実行された結果が戻り値となる
returnをメソッド内で書くとそこで処理が終わる。戻り値を指定することもできる

### 引数
メソッドには引数として呼び出し元から数値等のオブジェクトを渡すことができ、メソッド内でそれを使って処理を行うことができる。  

引数を受け取るメソッドの定義
```
def メソッド名(引数を格納する変数)
    処理内容
end
```

メソッドの呼び出しの際に引数を（）で指定する
（）はメソッドの解釈が曖昧にならない範囲で省略することもできる

### 引数のデフォルト値
引数が必要なメソッドを呼び出す際に引数を与えなかった場合はエラーになるが、デフォルト値を設定しておくことでその値が使用される。  
つまりデフォルト値を使用する場合は引数を省略することができる。
```
def メソッド名(変数名 = デフォルト値)
    処理内容
end
```

### キーワード引数
キーワード引数を使用することで、メソッドを呼び出す際の引数の順番が定義時の順番通りでなくても良く、引数の名前から内容が想像しやすくなり、コードが読みやすくなる。
```
def メソッド名(変数名:)
    処理内容
end
```

呼び出し方
```
メソッド名(変数名: 値)
```

### 変数のスコープ
メソッド内で定義されたローカル変数はメソッド外からは使えない・見えない
メソッド外で定義されたローカル変数もメソッド内では使えない・見えない

# CHAPTER8 クラス
クラスとは、オブジェクトの種族を表すもの。またはオブジェクトの設計図などと表現される。  
全てのオブジェクトはいずれかのクラスに属しており、classメソッドでオブジェクトの属しているクラスを確認できる。  
クラスは自分で作ることができる  
クラスの定義
```
class クラス名
    処理内容など
end
```
クラス名の付け方:ClassNameの様に各単語の頭文字を大文字にする(キャメルケース)

クラスから作成されたオブジェクトを**インスタンス**と呼ぶ

### レシーバ
メソッドを呼び出されるオブジェクトのこと。  
〇〇.メソッドの〇〇の部分。  
例えば`2.even?`の2(整数オブジェクト)

### インスタンス変数
クラスから作成されたインスタンスの中で使うことができる変数。名前の頭に@をつける  
クラスで定義されたメソッドの中で共通して利用することができる。  
インスタンス毎にそれぞれ異なる値を持たせられる

インスタンス変数の名前を取得するメソッドの名前は、慣習的に変数名から@を取ったものにすることが多い  
インスタンス変数へ代入するメソッドの名前は、慣習的に変数名から@を取って、最後に=をつけたものにすることが多い  
名前が=で終わるメソッドはメソッド名の=の間を開けて書くことができる。  
`〇〇.変数名 = 〇〇`の形になり、代入だと理解しやすい

### initializeメソッド
定義しておくことで、クラスのインスタンスが作られた際、最初に実行される。  
必ず実行しておきたい初期化処理などを行う。  
インスタンスの作成時に引数を渡して処理することもできる。  

### インスタンスメソッド
作成した（オブジェクト）インスタンスに対して呼び出すメソッド。  
`オブジェクト名.メソッド名`の形で呼び出す。

### クラスメソッド
クラスに対して呼び出すメソッド。  
`クラス名.メソッド名`の形で呼び出す。
定義するときに前方にselfをつける。インスタンスを作成することなく呼び出せる。

### 継承
あるクラスの内容（メソッド、変数など）を引き継いだ他のクラスを作成すること。  
継承元を親、継承先を子と呼び、子は親で定義したメソッドや変数をそのまま使用することができる。  

あるクラスを継承したクラスの作成
```
class クラス名 < 親クラス名
    処理内容など
end
```
子クラスで親クラスと同名のメソッドを定義した場合は、小クラスのものが優先して実行される。  

### privateなメソッド
クラスの定義の外からは呼び出せないメソッド。  
定義の前の行にprivateを付けると、その行以降のメソッドはprivateになる。  
クラス内からのみ使用して欲しいメソッドに指定する。  
反対にpublicなメソッドはクラスの定義の外からでも使用できる。（privateを指定しない場合はこちらになる）

# CHAPTER9 モジュール
プログラム全体で共同で使用するメソッドなどを定義する。クラスと似た存在。  
クラスと違ってインスタンスは作成されない。  
また、モジュールは継承することができない。
クラスにincludeすることで、moduleで定義したメソッドなどを使用できる。

モジュールの定義
```
module モジュール名
    内容
end
```
モジュール内でのメソッドの定義は、クラスでの定義と同様

### 名前空間(namespace)
プログラム内の別の箇所で同じ名前のクラスを定義して使用したい場合などに使用。  
別のモジュールに同じ名前のクラスをそれぞれ定義する。  
`モジュール名::クラス名.メソッド名`で呼び出す。  
モジュール名が違えば、同じクラス名でも別の物として呼び分けられる

### 別ファイルのクラスやモジュールの読み込み
`require_relative ファイル名`で別ファイルに分けたクラス等を読み込める。  
モジュールの場合はクラス内で別途includeが必要

# CHAPTER10
### Gem(ジェム)
使用する前にインストールが必要なRuby用のライブラリの事。たくさんある。
便利な機能などを簡単に使用することができる。  
`gem install Gem名`でインストールする。  
（RubyGemsの機能で、RubyGems.orgから探してインストールすることができる）  
RailsもGemの一つである。

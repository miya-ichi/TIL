# 現場で使えるRuby on Rails 5速習実践ガイド
## Chapter2 Railsアプリケーションを覗いてみよう
### Railsでアプリケーションを動かす
`rails nes アプリ名`で作業ディレクトリ下にアプリケーションの雛形となるフォルダとファイルが自動生成される
- 上記コマンドだとDBにSQLite3が使用される。`-d DBソフト名`で特定のDBを使用する設定ができる

`bin/rails db:create`でデータベースを作成
- bin/railsコマンドはGemfile通りのGemを使用する環境上でrailsを実行できる

`bin/rails s`でサーバーを起動。http://localhost:3000/ にアクセスするとRailsのページが表示される
- HTTPサーバーは標準ではPumaが使われている。
### ユーザー管理機能の雛形をつくる
```
bin/rails generate scaffold user name:string address:string age:integer
bin/rails db:migrate
bin/rails s
```
上記コマンドにてユーザー管理機能の雛形を簡単に作成できる  
この雛形は作成(Create),読み出し(Read),更新(Update),削除(Delete)の機能を持っている。
- 上記4機能はまとまって扱う場合が多い。頭文字を取って*CRUD*と呼ぶ

### MVC
RailsアプリケーションはM(モデル),V(ビュー),C(コントローラ)という考え方で構成されている  
### コントローラ
クライアントからのリクエストを受け、適切なレスポンスを返すための制御を行う  
まずリクエストが来たら、routes.rbに定義されたルーティング情報から、リクエストを担当する箇所を特定する(どのコントローラのどのアクションが実行するかを決める)  
### モデル
データとデータに関連する処理を行う  
コントローラのアクションから必要に応じて呼び出される
### ビュー
ブラウザに表示される画面を出力するコード  
ERBを使って記述する  
HTMLの中にRubyのコードを埋め込むことができる
ヘルパーメソッドというビューの中で使用できる機能がある(自分で定義することもできる)  
<html>タグなどの共通のパーツはレイアウトファイルにまとめてあり、  
個別の部分のみ各アクションごとに分けられたhtml.erbファイルに記述する  

## Chapter3 タスク管理アプリケーションを作ろう
### テンプレートエンジン
HTMLを出力する際に使用する。動的な処理を記述する際に内容が直感的でわかりやすいような書き方ができる
- ERB
- Haml
- Slim
### モデルの構成要素
- モデルに対応するRubyのクラス
- モデルに対応するデータベースのテーブル
### 命名規則
データベースのテーブル名:モデルのクラス名を複数形にする  
モデルのクラス名はキャメルケース、テーブル名はスネークケース
### コントローラの作成
ジェネレータで作成できる。アクションもセットで作成すると効率が良い  
CRUD機能のアクションはパターン化されている
### RESTful
設計思想。  
### Strong Parameters
受け取ったデータが不正なデータではないか確認した上で、必要なデータを取得する仕組み
### Flashメッセージ
リダイレクトするときに次のリクエストに対してデータを伝える仕組み
### パーシャル
viewの一部を共通化
## Chapter4
### マイグレーション
データベースのテーブルの追加・削除などの操作をRailsを介して行うことができる機能  
Rubyのコードで書かれたマイグレーションファイルに操作を記述する  
マイグレーションファイルはデータベースに対する操作を行うたび作成するため、  
それがデータベースの変更履歴となり、チーム開発の場合メンバーが確認しやすくなる  
マイグレーションの適用＝データベースのバージョンが1つ上がる
- db:migrate : 最新までマイグレーションを適用する
- db:migrate VERSION=○◯ : 特定のバージョンまでマイグレーションが適用された状態にする
- db:rollback : バージョンを1つ戻す
- db:rollback STEP=◯ : バージョンを指定した数戻す
- db:migrate:redo : バージョンを1つ戻してから1つ上げる

マイグレーションの適用中に、コードの不備などでエラーとなり途中で終了した場合は、  
エラーの出たマイグレーションの前までが適用された状態となり、その後の分は適用されない  
